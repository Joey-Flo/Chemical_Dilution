#include <gui/pumpsetupscreen_screen/PumpSetupScreenView.hpp>
#include <gui/pumpsetupscreen_screen/PumpSetupScreenPresenter.hpp>

PumpSetupScreenPresenter::PumpSetupScreenPresenter(PumpSetupScreenView& v)
    : view(v)
{

}

void PumpSetupScreenPresenter::activate()
{

}

void PumpSetupScreenPresenter::deactivate()
{

}


void PumpSetupScreenPresenter::pumpToggledHandler(int8_t index)
{
    // The Presenter contains the application logic.
    int array_index = index - 1;

    // Get the current state from the model (the source of truth)
    // and flip it.
    bool current_state_is_on = (model->getPumpEnableState(array_index) == 1);
    bool new_state_is_on = !current_state_is_on;

    // Tell the model to update its data in RAM and save to flash.
    model->setPumpEnableState(array_index, new_state_is_on);
}
