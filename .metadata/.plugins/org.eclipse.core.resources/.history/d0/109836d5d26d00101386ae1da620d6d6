#include <gui/pumpsetupscreen_screen/PumpSetupScreenView.hpp>
#include <gui/common/CustomKeyboard.hpp>

PumpSetupScreenView::PumpSetupScreenView()
{
	keyboard.setPosition (0,115,240,180);
	add(keyboard);
	keyboard.setVisible(false);
	keyboard.invalidate();
    for (int i = 0; i < 8; ++i) {
        KeyboardCallFlags[i] = 0;
    }

	Unicode::strncpy(PumpDensity_1Buffer, "1.00", PUMPDENSITY_1_SIZE);
	PumpDensity_1.invalidate();
}

void PumpSetupScreenView::HandleKeyboard(int8_t index){
	keyboard.setVisible(true);
	keyboard.invalidate();
	KeyboardExtras.setVisible(true);
	KeyboardExtras.invalidate();

	for (int i = 0; i < 8; i++){
		if (i == (index - 1)){
			KeyboardCallFlags[i] = 1;
		}
		else{
			KeyboardCallFlags[i] = 0;
		}
	}
}

void PumpSetupScreenView::setupScreen()
{
    PumpSetupScreenViewBase::setupScreen();
}

void PumpSetupScreenView::tearDownScreen()
{
    PumpSetupScreenViewBase::tearDownScreen();
}

/*
 * Virtual Action Handlers
 */
void PumpSetupScreenView::P1KeyboardCall()
{
    // Override and implement this function in PumpSetupScreen
	HandleKeyboard(1);
}
void PumpSetupScreenView::P2KeyboardCall()
{
    // Override and implement this function in PumpSetupScreen
	HandleKeyboard(2);
}
void PumpSetupScreenView::P3KeyboardCall()
{
    // Override and implement this function in PumpSetupScreen
	HandleKeyboard(3);
}
void PumpSetupScreenView::P4KeyboardCall()
{
    // Override and implement this function in PumpSetupScreen
	HandleKeyboard(4);
}
void PumpSetupScreenView::P5KeyboardCall()
{
    // Override and implement this function in PumpSetupScreen
	HandleKeyboard(5);
}
void PumpSetupScreenView::P6KeyboardCall()
{
    // Override and implement this function in PumpSetupScreen
	HandleKeyboard(6);
}
void PumpSetupScreenView::P7KeyboardCall()
{
    // Override and implement this function in PumpSetupScreen
	HandleKeyboard(7);
}
void PumpSetupScreenView::P8KeyboardCall()
{
    // Override and implement this function in PumpSetupScreen
	HandleKeyboard(8);
}
void PumpSetupScreenView::P1Toggle()
{
    // Override and implement this function in PumpSetupScreen
}
void PumpSetupScreenView::P2Toggle()
{
    // Override and implement this function in PumpSetupScreen
}
void PumpSetupScreenView::P3Toggle()
{
    // Override and implement this function in PumpSetupScreen
}
void PumpSetupScreenView::P4Toggle()
{
    // Override and implement this function in PumpSetupScreen
}
void PumpSetupScreenView::P5Toggle()
{
    // Override and implement this function in PumpSetupScreen
}
void PumpSetupScreenView::P6Toggle()
{
    // Override and implement this function in PumpSetupScreen
}
void PumpSetupScreenView::P7Toggle()
{
    // Override and implement this function in PumpSetupScreen
}
void PumpSetupScreenView::P8Toggle()
{
    // Override and implement this function in PumpSetupScreen
}
void PumpSetupScreenView::EnterPressed()
{
    // Override and implement this function in PumpSetupScreen
	keyboard.setVisible(false);
	keyboard.invalidate();
	KeyboardExtras.setVisible(false);
	KeyboardExtras.invalidate();

}
void PumpSetupScreenView::ExitPressed()
{
    // Override and implement this function in PumpSetupScreen
	keyboard.setVisible(false);
	keyboard.invalidate();
	KeyboardExtras.setVisible(false);
	KeyboardExtras.invalidate();
}
